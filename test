{
  "includeFiles":[
  ],
  "metadata":{
    "amiScriptMethods":[
      "{\n",
      "  \n",
      "  int tradeVelocity(String symbol)\n",
      "  {\n",
      "    Table recent_trades = USE ds=\"AMI\" EXECUTE SELECT quantity FROM trades WHERE symbol == \"${symbol}\" ORDER BY timestamp ASC LIMIT 10;\n",
      "    double velo = SELECT sum(quantity) from recent_trades;\n",
      "    int velo_int = round(velo);\n",
      "    return velo_int;\n",
      "\n",
      "  };\n",
      "  \n",
      "  int addUserOrder(String symbol, String direction, String kind, Double price, Int Qty)\n",
      "  {\n",
      "    // need to combine incoming orderFeed with user orders to overall feed\n",
      "    Rand r = new Rand();\n",
      "    int orderId = r.nextInt(0,10);\n",
      "    USE ds=\"AMI\" EXECUTE INSERT INTO orderFeed VALUES (\"${symbol}\", ${orderId}, \"USER\", \"${direction}\", \"${kind}\", ${price}, ${Qty}, ${Qty}, ${timestamp()}, ${timestamp()});\n",
      "  };\n",
      "  \n",
      "  int viewOrderLadder(String symbol)\n",
      "  { // Not used, look into how to view different order ladders for symbols in a smart and efficient way\n",
      "    USE ds=\"AMI\" EXECUTE DROP TABLE IF EXISTS ladder_bids;\n",
      "    USE ds=\"AMI\" EXECUTE CREATE TABLE ladder_bids AS SELECT Qty, price FROM orderFeed WHERE symbol == \"${symbol}\";\n",
      "    return 1;\n",
      "  };\n",
      "  \n",
      "  // Methods below need to be properly added to .amisql file and then pasted into AMIDB shell\n",
      "  \n",
      "\n",
      "  List getSymbols() // Get symbols from order feed. For later: what if symbols are added later?\n",
      "  {\n",
      "    Table distinctSymbols = USE ds=\"AMI\" EXECUTE SELECT symbol FROM orderFeed GROUP BY symbol;\n",
      "    List l = distinctSymbols.getRows();\n",
      "    int size = l.size();\n",
      "    List syms = new List();\n",
      "    for (int i = 0; i < size; i++) {\n",
      "      Map m = l.get(i);\n",
      "      syms.add(m.get(\"symbol\"));\n",
      "    }\n",
      "    return syms;\n",
      "  };\n",
      "  \n",
      "  int processAllTrades()\n",
      "  {\n",
      "    list symbolsToTrade = getSymbols();\n",
      "    Iterator i = symbolsToTrade.iterator();\n",
      "    int count = 0;\n",
      "    while(i.hasNext()) {\n",
      "      String sym = symbolsToTrade.get(count);\n",
      "      count += 1;\n",
      "      i.next();\n",
      "      simpleMatch(sym);\n",
      "    }\n",
      "  };\n",
      "  \n",
      "  Double getSpread(Double bid, Double ask)\n",
      "  { // Make complex later\n",
      "    return ask - bid;\n",
      "  };\n",
      "  \n",
      "  Int simpleMatch(String symbol) \n",
      "  {\n",
      "    // Trading priority: Market Buy Limit Sell, Limit Buy Market Sell, Limit Buy Limit sell (Market-market orders can't occur, since no agreement on price can be set)\n",
      "    \n",
      "    // Market Buy, Limt Sell\n",
      "    //Get one BUY order\n",
      "    Table buyTable = USE ds=\"AMI\" EXECUTE SELECT * FROM orderFeed WHERE direction == \"BUY\" AND OpenQty > 0 AND kind == \"MARKET\" ORDER BY price DESC, timestamp ASC;\n",
      "  \n",
      "    // Get one SELL order\n",
      "    Table sellTable = USE ds=\"AMI\" EXECUTE SELECT * FROM orderFeed WHERE direction == \"SELL\" AND OpenQty > 0 AND kind == \"MARKET\" ORDER BY price ASC, timestamp ASC;\n",
      "  \n",
      "    // Get rows\n",
      "    List buys = buyTable.getRows();\n",
      "    List sells = sellTable.getRows();\n",
      "  \n",
      "    if (buys.size() == 0 || sells.size() == 0) { // Option 2: Limit Buy, Market Sell\n",
      "    session.log(1);\n",
      "      buyTable = USE ds=\"AMI\" EXECUTE SELECT * FROM orderFeed WHERE direction == \"BUY\" AND OpenQty > 0 AND kind == \"LIMIT\" ORDER BY price DESC, timestamp ASC;\n",
      "      sellTable = USE ds=\"AMI\" EXECUTE SELECT * FROM orderFeed WHERE direction == \"SELL\" AND OpenQty > 0 AND kind == \"MARKET\" ORDER BY price ASC, timestamp ASC;\n",
      "      buys = buyTable.getRows();\n",
      "      sells = sellTable.getRows();\n",
      "      \n",
      "      if (buys.size() == 0 || sells.size() == 0) { // Option 3: Limit Buy and sell\n",
      "      buyTable = USE ds=\"AMI\" EXECUTE SELECT * FROM orderFeed WHERE direction == \"BUY\" AND OpenQty > 0 AND kind == \"LIMIT\" ORDER BY price DESC, timestamp ASC;\n",
      "      sellTable = USE ds=\"AMI\" EXECUTE SELECT * FROM orderFeed WHERE direction == \"SELL\" AND OpenQty > 0 AND kind == \"LIMIT\" ORDER BY price ASC, timestamp ASC;\n",
      "      buys = buyTable.getRows();\n",
      "      sells = sellTable.getRows();\n",
      "      }\n",
      "      \n",
      "    }\n",
      "\n",
      "   int ret = executeTrade(symbol, buys, sells);\n",
      "   return 1;\n",
      "  };\n",
      "\n",
      "  Int archiveTrades_method(Double date, String symbol, Int qty, Double price, String buyAcc, String sellAcc)  // This will need to be used somehow, whether that's thru a timer/trigger or existing procedure\n",
      "  {\n",
      "  USE ds=\"AMI\" INSERT INTO tradeArchives VALUES(${date}, \"${symbol}\", ${qty}, ${price}, \"${buyAcc}\", \"${sellAcc}\");\n",
      "  };\n",
      "\n",
      "  Int executeTrade(String symbol, List buys, List sells)\n",
      "  {\n",
      "  // Retrieve best buy and best sell\n",
      "  Map buy = buys.get(0);\n",
      "  Map sell = sells.get(0);\n",
      "\n",
      "  Double buyPrice = buy.get(\"price\");\n",
      "  Double sellPrice = sell.get(\"price\");\n",
      "  session.log(buyPrice);\n",
      "  \n",
      "  Double spread = buyPrice - sellPrice;\n",
      "\n",
      "  if (spread >= 10) { // Spread logic\n",
      "    return 0; // If spread isn't crossed (work on later), then don't trade!\n",
      "  }\n",
      "  \n",
      "  else {\n",
      "    Int buyQty = buy.get(\"OpenQty\");\n",
      "    String buyAcc = buy.get(\"account\");\n",
      "    String buyType = buy.get(\"kind\");\n",
      "    Int sellQty = sell.get(\"OpenQty\");\n",
      "    String sellAcc = sell.get(\"account\");\n",
      "    \n",
      "    Int matchQty = minimum(buyQty, sellQty);\n",
      "    Int newOpenQty_buy = buyQty - matchQty;\n",
      "    Int newOpenQty_sell = sellQty - matchQty;\n",
      "    Double tradePrice = (buyPrice + sellPrice) / 2;\n",
      "    \n",
      "    USE ds=\"AMI\" EXECUTE INSERT INTO trades VALUES (\"${symbol}\", ${tradePrice}, ${matchQty}, \"${buyAcc}\", \"${sellAcc}\", ${timestamp()} );\n",
      "  \n",
      "    int i = archiveTrades_method((double) timestamp(), symbol, matchQty, tradePrice, buyAcc, sellAcc);\n",
      "\n",
      "    // Need to update openQty in order book for both buy and sells\n",
      "    USE ds=\"AMI\" EXECUTE UPDATE orderFeed SET OpenQty = ${newOpenQty_buy} WHERE account == \"${buyAcc}\";\n",
      "    USE ds=\"AMI\" EXECUTE UPDATE orderFeed SET OpenQty = ${newOpenQty_sell} WHERE account == \"${sellAcc}\";\n",
      "  \n",
      "    return 1;\n",
      "  }\n",
      "  };\n",
      "  \n",
      "}"
    ],
    "callbacks":{
      "entries":[
        {
          "amiscript":"session.alert(\"start\");",
          "linkedVariables":[
          ],
          "name":"onStartup"
        }
      ]
    },
    "customPrefsImportMode":"reject",
    "dm":{
      "dms":[
        {
          "callbacks":{
            "entries":[
              {
                "amiscript":[
                  "{\n",
                  "  for(RealtimeEvent event=rtevents;event!=null;event=event.getNext()){\n",
                  "    //TODO: handle realtime event.\n",
                  "  }\n",
                  "}\n"
                ],
                "hasDatamodel":true,
                "linkedVariables":[
                ],
                "name":"onProcess",
                "schema":{
                  "tbl":[
                    {
                      "cols":[
                        {
                          "nm":"symbol",
                          "tp":"String"
                        },
                        {
                          "nm":"A",
                          "tp":"String"
                        },
                        {
                          "nm":"quantity",
                          "tp":"Integer"
                        },
                        {
                          "nm":"sellAccount",
                          "tp":"String"
                        },
                        {
                          "nm":"D",
                          "tp":"Long"
                        },
                        {
                          "nm":"price",
                          "tp":"Double"
                        },
                        {
                          "nm":"buyAccount",
                          "tp":"String"
                        },
                        {
                          "nm":"timestamp",
                          "tp":"Double"
                        }
                      ],
                      "nm":"FEED:trades",
                      "oc":"ask"
                    }
                  ]
                }
              }
            ]
          },
          "lbl":"datamodel",
          "queryMode":"startup",
          "subscribe":[
            "FEED:trades"
          ],
          "test_input_type":"OPEN",
          "test_input_vars":"String WHERE=\"true\";"
        },
        {
          "callbacks":{
            "entries":[
              {
                "amiscript":[
                  "{\n",
                  "  CREATE TABLE fills AS SELECT * FROM `FEED:orderFeed` WHERE OpenQty == 0;\n",
                  "  ALTER TABLE fills DROP OpenQty;\n",
                  "}\n"
                ],
                "defaultDs":"AMI",
                "hasDatamodel":true,
                "inputDm":[
                  "orders"
                ],
                "isDynamicDatamodel":true,
                "linkedVariables":[
                ],
                "name":"onProcess",
                "schema":{
                  "tbl":[
                    {
                      "cols":[
                        {
                          "nm":"OpenQty",
                          "tp":"Integer"
                        },
                        {
                          "nm":"symbol",
                          "tp":"String"
                        },
                        {
                          "nm":"A",
                          "tp":"String"
                        },
                        {
                          "nm":"D",
                          "tp":"Long"
                        },
                        {
                          "nm":"orderId",
                          "tp":"Integer"
                        },
                        {
                          "nm":"kind",
                          "tp":"String"
                        },
                        {
                          "nm":"price",
                          "tp":"Double"
                        },
                        {
                          "nm":"Qty",
                          "tp":"Integer"
                        },
                        {
                          "nm":"I",
                          "tp":"String"
                        },
                        {
                          "nm":"account",
                          "tp":"String"
                        },
                        {
                          "nm":"direction",
                          "tp":"String"
                        },
                        {
                          "nm":"timestamp",
                          "tp":"Double"
                        }
                      ],
                      "nm":"FEED:orderFeed",
                      "oc":"ask"
                    },
                    {
                      "cols":[
                        {
                          "nm":"symbol",
                          "tp":"String"
                        },
                        {
                          "nm":"A",
                          "tp":"String"
                        },
                        {
                          "nm":"D",
                          "tp":"Long"
                        },
                        {
                          "nm":"orderId",
                          "tp":"Integer"
                        },
                        {
                          "nm":"kind",
                          "tp":"String"
                        },
                        {
                          "nm":"price",
                          "tp":"Double"
                        },
                        {
                          "nm":"Qty",
                          "tp":"Integer"
                        },
                        {
                          "nm":"I",
                          "tp":"String"
                        },
                        {
                          "nm":"account",
                          "tp":"String"
                        },
                        {
                          "nm":"direction",
                          "tp":"String"
                        },
                        {
                          "nm":"timestamp",
                          "tp":"Double"
                        }
                      ],
                      "nm":"fills",
                      "oc":"ask"
                    }
                  ]
                }
              }
            ]
          },
          "datasources":[
            "AMI"
          ],
          "lbl":"fills",
          "maxRequery":5000,
          "subscribe":[
            "FEED:orderFeed"
          ],
          "test_input_type":"OPEN",
          "test_input_vars":"String WHERE=\"true\";"
        },
        {
          "callbacks":{
            "entries":[
              {
                "amiscript":[
                  "{\n",
                  "  for(RealtimeEvent event=rtevents;event!=null;event=event.getNext()){\n",
                  "    //TODO: handle realtime event.\n",
                  "  }\n",
                  "}\n"
                ],
                "hasDatamodel":true,
                "linkedVariables":[
                ],
                "name":"onProcess",
                "schema":{
                  "tbl":[
                    {
                      "cols":[
                        {
                          "nm":"OpenQty",
                          "tp":"Integer"
                        },
                        {
                          "nm":"symbol",
                          "tp":"String"
                        },
                        {
                          "nm":"A",
                          "tp":"String"
                        },
                        {
                          "nm":"D",
                          "tp":"Long"
                        },
                        {
                          "nm":"orderId",
                          "tp":"Integer"
                        },
                        {
                          "nm":"kind",
                          "tp":"String"
                        },
                        {
                          "nm":"price",
                          "tp":"Double"
                        },
                        {
                          "nm":"Qty",
                          "tp":"Integer"
                        },
                        {
                          "nm":"I",
                          "tp":"String"
                        },
                        {
                          "nm":"account",
                          "tp":"String"
                        },
                        {
                          "nm":"direction",
                          "tp":"String"
                        },
                        {
                          "nm":"timestamp",
                          "tp":"Double"
                        }
                      ],
                      "nm":"FEED:orderFeed",
                      "oc":"ask"
                    }
                  ]
                }
              }
            ]
          },
          "lbl":"orders",
          "queryMode":"startup",
          "subscribe":[
            "FEED:orderFeed"
          ],
          "test_input_type":"OPEN",
          "test_input_vars":"String WHERE=\"true\";"
        },
        {
          "callbacks":{
            "entries":[
              {
                "amiscript":[
                  "{\n",
                  "  \n",
                  "  CREATE TABLE orderLadder AS SELECT * FROM `FEED:orderFeed` WHERE symbol == \"${selected_symbol}\" AND OpenQty != 0;\n",
                  "}\n"
                ],
                "customFormats":[
                  {
                    "ari":"FIELDVALUE:orderLadder_help2?multiselect?",
                    "customFormat":1
                  }
                ],
                "defaultDs":"AMI",
                "domEvents":[
                  {
                    "ari":"FIELDVALUE:orderLadder_help2?multiselect?",
                    "domEvent":1
                  }
                ],
                "hasDatamodel":true,
                "inputDm":[
                  "orders"
                ],
                "keepTableset":true,
                "linkedVariables":[
                  {
                    "ari":"FIELDVALUE:orderLadder_help2?multiselect?",
                    "varName":"selected_symbol"
                  }
                ],
                "name":"onProcess",
                "schema":{
                  "tbl":[
                    {
                      "cols":[
                        {
                          "nm":"OpenQty",
                          "tp":"Integer"
                        },
                        {
                          "nm":"symbol",
                          "tp":"String"
                        },
                        {
                          "nm":"A",
                          "tp":"String"
                        },
                        {
                          "nm":"D",
                          "tp":"Long"
                        },
                        {
                          "nm":"orderId",
                          "tp":"Integer"
                        },
                        {
                          "nm":"kind",
                          "tp":"String"
                        },
                        {
                          "nm":"price",
                          "tp":"Double"
                        },
                        {
                          "nm":"Qty",
                          "tp":"Integer"
                        },
                        {
                          "nm":"I",
                          "tp":"String"
                        },
                        {
                          "nm":"account",
                          "tp":"String"
                        },
                        {
                          "nm":"direction",
                          "tp":"String"
                        },
                        {
                          "nm":"timestamp",
                          "tp":"Double"
                        }
                      ],
                      "nm":"FEED:orderFeed",
                      "oc":"ask"
                    },
                    {
                      "cols":[
                        {
                          "nm":"OpenQty",
                          "tp":"Integer"
                        },
                        {
                          "nm":"symbol",
                          "tp":"String"
                        },
                        {
                          "nm":"A",
                          "tp":"String"
                        },
                        {
                          "nm":"D",
                          "tp":"Long"
                        },
                        {
                          "nm":"orderId",
                          "tp":"Integer"
                        },
                        {
                          "nm":"kind",
                          "tp":"String"
                        },
                        {
                          "nm":"price",
                          "tp":"Double"
                        },
                        {
                          "nm":"Qty",
                          "tp":"Integer"
                        },
                        {
                          "nm":"I",
                          "tp":"String"
                        },
                        {
                          "nm":"account",
                          "tp":"String"
                        },
                        {
                          "nm":"direction",
                          "tp":"String"
                        },
                        {
                          "nm":"timestamp",
                          "tp":"Double"
                        }
                      ],
                      "nm":"orderLadder",
                      "oc":"ask"
                    }
                  ]
                }
              }
            ]
          },
          "datasources":[
            "AMI"
          ],
          "lbl":"ordersLadder",
          "minRequery":5000,
          "queryMode":"startup,visible",
          "subscribe":[
            "FEED:orderFeed"
          ],
          "test_input_type":"OPEN",
          "test_input_vars":"String WHERE=\"true\";"
        }
      ]
    },
    "fileVersion":4,
    "menubarPosition":"top",
    "rt":{
    },
    "stm":{
      "styles":[
        {
          "id":"LAYOUT_DEFAULT",
          "lb":"Layout Default",
          "pt":"DEFAULT",
          "vl":{
            "div":{
              "divCl":"#a6ad7e",
              "divSz":3.0
            },
            "form":{
              "bgCl":"#717f6d",
              "titlePnlFontFm":"Ubuntu"
            },
            "formButtonField":{
              "fldBgCl":"#356e75"
            },
            "table":{
              "bgCl":"#a3bf9c",
              "columnFilterBdrCl":"#7144e2",
              "columnFilterBgCl":"#cccccc",
              "flashDnCl":"#f9e900",
              "flashUpCl":"#f9e900",
              "fontFam":"Ubuntu",
              "graybarCl":"#9bc9ff",
              "headerBgCl":"#2f7208",
              "headerFontSz":15.0,
              "titlePnlFontFm":"Ubuntu"
            },
            "treegrid":{
              "bgCl":"#2f7208",
              "fontFam":"Ubuntu"
            }
          }
        }
      ]
    },
    "transientIdPrefix":"TRANSIENT_"
  },
  "portletConfigs":[
    {
      "portletBuilderId":"amidesktop",
      "portletConfig":{
        "amiPanelId":"@DESKTOP",
        "amiStyle":{
          "pt":"NOVA_DARK"
        },
        "windows":[
          {
            "header":true,
            "heightDflt":323,
            "hidden":false,
            "leftDflt":160,
            "portlet":"Div2",
            "pos":0,
            "stateDflt":"max",
            "title":"main",
            "topDflt":180,
            "widthDflt":636,
            "zindexDflt":2
          }
        ]
      }
    },
    {
      "portletBuilderId":"div",
      "portletConfig":{
        "amiPanelId":"Div1",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "child1":"Div3",
        "child2":"trades",
        "dir":"v",
        "locked":false,
        "offset":0.78095,
        "upid":"Div1"
      }
    },
    {
      "portletBuilderId":"div",
      "portletConfig":{
        "amiPanelId":"Div10",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "child1":"Div11",
        "child2":"Div12",
        "dir":"v",
        "locked":false,
        "offset":0.70282,
        "upid":"Div10"
      }
    },
    {
      "portletBuilderId":"div",
      "portletConfig":{
        "amiPanelId":"Div11",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "child1":"orderLadder_help2",
        "child2":"sell_orderLadder",
        "dir":"h",
        "locked":false,
        "offset":0.41946,
        "upid":"Div11"
      }
    },
    {
      "portletBuilderId":"div",
      "portletConfig":{
        "amiPanelId":"Div12",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "child1":"buy_orderLadder",
        "child2":"orderLadder_help1",
        "dir":"h",
        "locked":false,
        "offset":0.53274,
        "upid":"Div12"
      }
    },
    {
      "portletBuilderId":"div",
      "portletConfig":{
        "amiPanelId":"Div13",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "child1":"trades_velo",
        "child2":"trading_volume",
        "dir":"v",
        "locked":false,
        "offset":0.4878,
        "upid":"Div13"
      }
    },
    {
      "portletBuilderId":"div",
      "portletConfig":{
        "amiPanelId":"Div14",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "child1":"Html6",
        "child2":"Div10",
        "dir":"h",
        "locked":false,
        "offset":0.13056,
        "upid":"Div14"
      }
    },
    {
      "portletBuilderId":"div",
      "portletConfig":{
        "amiPanelId":"Div15",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "child1":"stock_prices",
        "child2":"place_orders",
        "dir":"v",
        "locked":false,
        "offset":0.5772,
        "upid":"Div15"
      }
    },
    {
      "portletBuilderId":"div",
      "portletConfig":{
        "amiPanelId":"Div2",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "child1":"Div4",
        "child2":"Div6",
        "dir":"h",
        "locked":false,
        "offset":0.48974,
        "upid":"Div2"
      }
    },
    {
      "portletBuilderId":"div",
      "portletConfig":{
        "amiPanelId":"Div3",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "child1":"Div15",
        "child2":"orderFeed",
        "dir":"v",
        "locked":false,
        "offset":0.62153,
        "upid":"Div3"
      }
    },
    {
      "portletBuilderId":"div",
      "portletConfig":{
        "amiPanelId":"Div4",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "child1":"Div5",
        "child2":"Div1",
        "dir":"h",
        "locked":false,
        "offset":0.22113,
        "upid":"Div4"
      }
    },
    {
      "portletBuilderId":"div",
      "portletConfig":{
        "amiPanelId":"Div5",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "child1":"Html9",
        "child2":"config_sim",
        "dir":"v",
        "locked":false,
        "offset":0.12656,
        "upid":"Div5"
      }
    },
    {
      "portletBuilderId":"div",
      "portletConfig":{
        "amiPanelId":"Div6",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "child1":"Div8",
        "child2":"Div7",
        "dir":"v",
        "locked":false,
        "offset":0.77978,
        "upid":"Div6"
      }
    },
    {
      "portletBuilderId":"div",
      "portletConfig":{
        "amiPanelId":"Div7",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "child1":"Html5",
        "child2":"fills_table",
        "dir":"h",
        "locked":false,
        "offset":0.20583,
        "upid":"Div7"
      }
    },
    {
      "portletBuilderId":"div",
      "portletConfig":{
        "amiPanelId":"Div8",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "child1":"Div9",
        "child2":"Div13",
        "dir":"v",
        "locked":false,
        "offset":0.65631,
        "upid":"Div8"
      }
    },
    {
      "portletBuilderId":"div",
      "portletConfig":{
        "amiPanelId":"Div9",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "child1":"Html1",
        "child2":"Div14",
        "dir":"v",
        "locked":false,
        "offset":0.61733,
        "upid":"Div9"
      }
    },
    {
      "portletBuilderId":"amiform",
      "portletConfig":{
        "amiPanelId":"Html1",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "fields":[
          {
            "callbacks":{
              "entries":[
                {
                  "amiscript":[
                    "Table recent_trades = USE ds=\"AMI\" EXECUTE SELECT quantity FROM trades WHERE symbol == \"TSLA\" ORDER BY timestamp ASC LIMIT 10;\n",
                    "\n",
                    "double speed = SELECT sum(quantity) from recent_trades;\n"
                  ],
                  "linkedVariables":[
                  ],
                  "name":"onChange"
                }
              ]
            },
            "heightPx":20,
            "l":"test",
            "leftPosPx":100,
            "n":"button",
            "style":{
              "pt":"LAYOUT_DEFAULT"
            },
            "t":"buttonField",
            "topPosPx":20,
            "widthPx":200,
            "zidx":1
          }
        ],
        "snap":20,
        "upid":"Html1"
      }
    },
    {
      "portletBuilderId":"amiform",
      "portletConfig":{
        "amiPanelId":"Html5",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "htmlTemplate2":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Filled Orders</title>\n  <style>\n    body {\n      background-color: #1c1c1c;\n      justify-content: center;\n      align-items: center;\n      height: 100vh;\n      margin: 0;\n      font-family: Ubuntu;\n    }\n\n    h1 {\n      font-size: 2.8rem;\n      color: ##356e75;\n    }\n\n  </style>\n</head>\n<body>\n  <h1>Filled Orders</h1>\n</body>\n</html>\n",
        "snap":20,
        "upid":"Html5"
      }
    },
    {
      "portletBuilderId":"amiform",
      "portletConfig":{
        "amiPanelId":"Html6",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "guides":[
          {
            "alignment":0,
            "isVertical":false,
            "offsetPx":34
          }
        ],
        "htmlTemplate2":"Order Ladder",
        "snap":20,
        "upid":"Html6"
      }
    },
    {
      "portletBuilderId":"amiform",
      "portletConfig":{
        "amiPanelId":"Html9",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "htmlTemplate2":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Filled Orders</title>\n  <style>\n    body {\n      background-color: #1c1c1c;\n      justify-content: center;\n      align-items: center;\n      height: 100vh;\n      margin: 0;\n      font-family: Ubuntu;\n    }\n\n    h1 {\n      font-size: 2.8rem;\n      color: ##356e75;\n    }\n\n  </style>\n</head>\n<body>\n  <h1>Market Simulator</h1>\n</body>\n</html>\n",
        "upid":"Html9"
      }
    },
    {
      "portletBuilderId":"amistatictable",
      "portletConfig":{
        "amiCols":[
          {
            "fm":"price",
            "id":"price",
            "location":0,
            "tl":"Price",
            "tp":"numeric",
            "width":49
          },
          {
            "fm":"Qty",
            "id":"Qty",
            "location":1,
            "pc":0,
            "tl":"Qty",
            "tp":"numeric",
            "width":40
          },
          {
            "id":"D",
            "width":100
          },
          {
            "fm":"symbol",
            "id":"symbol",
            "tl":"Symbol",
            "tp":"text",
            "width":60
          },
          {
            "fm":"OpenQty",
            "id":"OpenQty",
            "pc":0,
            "tl":"Open Qty",
            "tp":"numeric",
            "width":74
          },
          {
            "fm":"direction",
            "id":"direction",
            "tl":"Direction",
            "tp":"text",
            "width":69
          },
          {
            "fm":"timestamp",
            "id":"timestamp",
            "tl":"Timestamp",
            "tp":"numeric",
            "width":136
          },
          {
            "fm":"kind",
            "id":"kind",
            "tl":"Type",
            "tp":"text",
            "width":43
          }
        ],
        "amiPanelId":"buy_orderLadder",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "amiTitle":"buy_orderLadder",
        "curtimeUpdateFrequency":1000,
        "dm":[
          {
            "dmadn":"ordersLadder",
            "dmtbid":[
              "orderLadder"
            ]
          }
        ],
        "dynamicColumns":"false",
        "editDblClk":true,
        "editInplace":false,
        "editMenuTitle":"Edit Row(s)",
        "editMode":0,
        "editRerunDM":true,
        "filters":{
          "direction":{
            "i":null,
            "ii":true,
            "k":true,
            "n":false,
            "p":false,
            "v":[
              "SELL"
            ],
            "x":null,
            "xi":true
          }
        },
        "pinCnt":0,
        "rollupEnabled":false,
        "scrollToBottomOnAppend":false,
        "showCommandMenu":true,
        "showLastRuntime":true,
        "titlePnl":{
          "title":"buy_orderLadder"
        },
        "upid":"ordersLadder1",
        "varTypes":{
          "OpenQty":"Integer",
          "Qty":"Integer",
          "direction":"String",
          "kind":"String",
          "price":"Double",
          "symbol":"String",
          "timestamp":"Double"
        }
      }
    },
    {
      "portletBuilderId":"amiform",
      "portletConfig":{
        "amiPanelId":"config_sim",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "fields":[
          {
            "heightPx":20,
            "l":"See trade archive",
            "leftPosPx":100,
            "n":"button",
            "style":{
              "fldFontFam":"Ubuntu",
              "pt":"LAYOUT_DEFAULT"
            },
            "t":"buttonField",
            "topPosPx":20,
            "widthPx":200,
            "zidx":1
          },
          {
            "heightPx":20,
            "l":"new trading day",
            "leftPosPx":380,
            "n":"button1",
            "style":{
              "pt":"LAYOUT_DEFAULT"
            },
            "t":"buttonField",
            "topPosPx":20,
            "widthPx":200,
            "zidx":2
          }
        ],
        "snap":20,
        "upid":"Html2"
      }
    },
    {
      "portletBuilderId":"amistatictable",
      "portletConfig":{
        "amiCols":[
          {
            "fm":"symbol",
            "id":"symbol",
            "location":0,
            "tl":"Symbol",
            "tp":"text",
            "width":60
          },
          {
            "fm":"direction",
            "id":"direction",
            "location":1,
            "tl":"Direction",
            "tp":"text",
            "width":69
          },
          {
            "fm":"kind",
            "id":"kind",
            "location":2,
            "tl":"Kind",
            "tp":"text",
            "width":64
          },
          {
            "fm":"price",
            "id":"price",
            "location":3,
            "tl":"Price",
            "tp":"numeric",
            "width":49
          },
          {
            "fm":"Qty",
            "id":"Qty",
            "location":4,
            "pc":0,
            "tl":"Qty",
            "tp":"numeric",
            "width":40
          },
          {
            "fm":"account",
            "id":"account",
            "location":5,
            "tl":"Account",
            "tp":"text",
            "width":67
          },
          {
            "fm":"orderId",
            "id":"orderId",
            "location":6,
            "pc":0,
            "tl":"order Id",
            "tp":"numeric",
            "width":61
          },
          {
            "fm":"timestamp",
            "id":"timestamp",
            "location":7,
            "tl":"Timestamp",
            "tp":"numeric",
            "width":136
          },
          {
            "id":"D",
            "width":100
          }
        ],
        "amiPanelId":"fills_table",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "amiTitle":"fills",
        "curtimeUpdateFrequency":1000,
        "dm":[
          {
            "dmadn":"fills",
            "dmtbid":[
              "fills"
            ]
          }
        ],
        "dynamicColumns":"false",
        "editDblClk":true,
        "editInplace":false,
        "editMenuTitle":"Edit Row(s)",
        "editMode":0,
        "editRerunDM":true,
        "filters":{
        },
        "pinCnt":0,
        "rollupEnabled":false,
        "scrollToBottomOnAppend":false,
        "showCommandMenu":true,
        "showLastRuntime":true,
        "titlePnl":{
          "title":"fills"
        },
        "upid":"datamodel1",
        "varTypes":{
          "Qty":"Integer",
          "account":"String",
          "direction":"String",
          "kind":"String",
          "orderId":"Integer",
          "price":"Double",
          "symbol":"String",
          "timestamp":"Double"
        }
      }
    },
    {
      "portletBuilderId":"amirealtimetable",
      "portletConfig":{
        "amiCols":[
          {
            "fm":"symbol",
            "id":"symbol",
            "location":0,
            "tl":"Symbol",
            "tp":"text",
            "width":100
          },
          {
            "fm":"direction",
            "id":"direction",
            "location":1,
            "tl":"Direction",
            "tp":"text",
            "width":100
          },
          {
            "fm":"Qty",
            "id":"Qty",
            "location":2,
            "pc":0,
            "tl":"Qty",
            "tp":"numeric",
            "width":80
          },
          {
            "fm":"kind",
            "id":"kind",
            "location":3,
            "tl":"type",
            "tp":"text",
            "width":64
          },
          {
            "fm":"price",
            "id":"price",
            "location":4,
            "tl":"Price",
            "tp":"price",
            "width":80
          },
          {
            "fm":"orderId",
            "id":"orderId",
            "location":5,
            "pc":0,
            "tl":"order Id",
            "tp":"numeric",
            "width":80
          },
          {
            "fm":"OpenQty",
            "id":"OpenQty",
            "location":6,
            "pc":0,
            "tl":"Open Qty",
            "tp":"numeric",
            "width":80
          },
          {
            "fm":"account",
            "id":"account",
            "location":7,
            "tl":"Account",
            "tp":"text",
            "width":100
          },
          {
            "fm":"timestamp",
            "id":"timestamp",
            "location":8,
            "tl":"Timestamp",
            "tp":"numeric",
            "width":80
          },
          {
            "id":"D",
            "width":100
          },
          {
            "id":"A",
            "width":100
          },
          {
            "id":"!data",
            "width":250
          },
          {
            "id":"M",
            "width":120
          },
          {
            "id":"C",
            "width":120
          },
          {
            "id":"V",
            "width":80
          },
          {
            "id":"W",
            "width":120
          },
          {
            "id":"T",
            "width":100
          },
          {
            "id":"P",
            "width":100
          },
          {
            "id":"E",
            "width":120
          },
          {
            "id":"I",
            "width":100
          }
        ],
        "amiPanelId":"orderFeed",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "amiTitle":"orderFeed",
        "callbacks":{
          "entries":[
            {
              "amiscript":"session.alert(1);",
              "linkedVariables":[
              ],
              "name":"onSelected"
            }
          ]
        },
        "curtimeUpdateFrequency":1000,
        "editDblClk":true,
        "editMenuTitle":"Edit Row(s)",
        "editMode":1,
        "filters":{
        },
        "hah":"true",
        "pinCnt":0,
        "rollupEnabled":false,
        "rtDownstreamMode":"SELECTED_OR_ALL",
        "rtSources":[
          "FEED:orderFeed"
        ],
        "scrollToBottomOnAppend":true,
        "showCommandMenu":true,
        "titlePnl":{
          "title":"orderFeed"
        },
        "upid":"Table3",
        "varTypes":{
          "OpenQty":"Integer",
          "Qty":"Integer",
          "account":"String",
          "direction":"String",
          "kind":"String",
          "orderId":"Integer",
          "price":"Double",
          "symbol":"String",
          "timestamp":"Double"
        }
      }
    },
    {
      "portletBuilderId":"amiform",
      "portletConfig":{
        "amiPanelId":"orderLadder_help1",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "htmlTemplate2":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Order Ladder</title>\n  <style>\n    body {\n      margin: 0;\n      padding: 0;\n      font-family: sans-serif;\n    }\n\n    .order-ladder-box {\n      background-color: #2e3b2f;\n      color: #ffffff;\n      padding: 10px;\n      width: 250px;\n      height: 150px;\n      border: 1px solid #4f5d4a;\n    }\n\n    .title {\n      font-size: 16px;\n      font-weight: bold;\n      margin-bottom: 10px;\n      color: #90ee90;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"order-ladder-box\">\n    <div class=\"title\">Order Ladder (SELL)</div>\n  </div>\n</body>\n</html>\n",
        "snap":20,
        "upid":"Html8"
      }
    },
    {
      "portletBuilderId":"amiform",
      "portletConfig":{
        "amiPanelId":"orderLadder_help2",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "fields":[
          {
            "callbacks":{
              "entries":[
                {
                  "amiscript":"session.alert(\"Now showing order ladder for \" + \"${sym}\");",
                  "linkedVariables":[
                    {
                      "ari":"FIELDVALUE:orderLadder_help2?multiselect?",
                      "varName":"sym"
                    }
                  ],
                  "name":"onChange"
                }
              ]
            },
            "dmid":"fills",
            "dmtbid":"fills",
            "dscid":"symbol",
            "dsrt":"asc",
            "dsvid":"symbol",
            "heightPx":20,
            "l":"Symbol",
            "leftPosPx":60,
            "n":"multiselect",
            "style":{
              "pt":"LAYOUT_DEFAULT"
            },
            "t":"selectField",
            "topPosPx":60,
            "widthPx":138,
            "zidx":1
          }
        ],
        "htmlTemplate2":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Order Ladder (BUY)</title>\n  <style>\n    html, body {\n      margin: 0;\n      padding: 0;\n      width: 100%;\n      height: 100%;\n    }\n\n    .order-ladder-box {\n      width: 100%;\n      height: 100%;\n      padding: 10px;\n      box-sizing: border-box;\n      font-family: sans-serif;\n    }\n\n    .title {\n      font-size: 16px;\n      font-weight: bold;\n      margin-bottom: 10px;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"order-ladder-box\">\n    <div class=\"title\">Order Ladder (BUY)</div>\n  </div>\n</body>\n</html>\n",
        "snap":20,
        "upid":"Html7"
      }
    },
    {
      "portletBuilderId":"amiform",
      "portletConfig":{
        "amiPanelId":"place_orders",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "fields":[
          {
            "callbacks":{
              "entries":[
                {
                  "amiscript":[
                    "double dub = 20;\n",
                    "int i = addUserOrder(\"TSLA\", \"BUY\", \"LIMIT\", dub, 10);"
                  ],
                  "linkedVariables":[
                  ],
                  "name":"onChange"
                }
              ]
            },
            "heightPx":20,
            "l":"place order",
            "leftPosPx":300,
            "n":"button",
            "style":{
              "pt":"LAYOUT_DEFAULT"
            },
            "t":"buttonField",
            "topPosPx":100,
            "widthPx":200,
            "zidx":1
          },
          {
            "dmid":"orders",
            "dmtbid":"FEED:orderFeed",
            "dscid":"symbol",
            "dsvid":"symbol",
            "heightPx":20,
            "l":"Symbol",
            "leftPosPx":60,
            "n":"multiselect",
            "style":{
              "pt":"LAYOUT_DEFAULT"
            },
            "t":"selectField",
            "topPosPx":60,
            "widthPx":200,
            "zidx":2
          },
          {
            "heightPx":20,
            "l":"Direction",
            "leftPosPx":60,
            "n":"text",
            "style":{
              "pt":"LAYOUT_DEFAULT"
            },
            "t":"textField",
            "topPosPx":100,
            "widthPx":200,
            "zidx":3
          }
        ],
        "htmlTemplate2":"add checks via session.alert() so that user can't put in weird trades that will never get filled (must compare user order to current orders in book)",
        "snap":20,
        "upid":"Html3"
      }
    },
    {
      "portletBuilderId":"amistatictable",
      "portletConfig":{
        "amiCols":[
          {
            "fm":"Qty",
            "id":"Qty",
            "location":0,
            "pc":0,
            "tl":"Qty",
            "tp":"numeric",
            "width":56
          },
          {
            "fm":"price",
            "id":"price",
            "location":1,
            "tl":"Price",
            "tp":"numeric",
            "width":60
          },
          {
            "id":"D",
            "width":100
          },
          {
            "fm":"symbol",
            "id":"symbol",
            "tl":"Symbol",
            "tp":"text",
            "width":60
          },
          {
            "fm":"OpenQty",
            "id":"OpenQty",
            "pc":0,
            "tl":"Open Qty",
            "tp":"numeric",
            "width":74
          },
          {
            "fm":"direction",
            "id":"direction",
            "tl":"Direction",
            "tp":"text",
            "width":69
          },
          {
            "fm":"timestamp",
            "id":"timestamp",
            "tl":"Timestamp",
            "tp":"numeric",
            "width":136
          },
          {
            "fm":"kind",
            "id":"kind",
            "tl":"Type",
            "tp":"text",
            "width":64
          }
        ],
        "amiPanelId":"sell_orderLadder",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "amiTitle":"sell_orderLadder",
        "curtimeUpdateFrequency":1000,
        "dm":[
          {
            "dmadn":"ordersLadder",
            "dmtbid":[
              "orderLadder"
            ]
          }
        ],
        "dynamicColumns":"false",
        "editDblClk":true,
        "editInplace":false,
        "editMenuTitle":"Edit Row(s)",
        "editMode":0,
        "editRerunDM":true,
        "filters":{
          "direction":{
            "i":null,
            "ii":true,
            "k":true,
            "n":false,
            "p":false,
            "v":[
              "BUY"
            ],
            "x":null,
            "xi":true
          }
        },
        "pinCnt":0,
        "rollupEnabled":false,
        "scrollToBottomOnAppend":false,
        "showCommandMenu":true,
        "showLastRuntime":true,
        "titlePnl":{
          "title":"sell_orderLadder"
        },
        "upid":"ordersLadder",
        "varTypes":{
          "OpenQty":"Integer",
          "Qty":"Integer",
          "direction":"String",
          "kind":"String",
          "price":"Double",
          "symbol":"String",
          "timestamp":"Double"
        }
      }
    },
    {
      "portletBuilderId":"amichartgrid",
      "portletConfig":{
        "amiPanelId":"stock_prices",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "amiTitle":"FEED:trades",
        "axisBcnts":[
          1
        ],
        "axisConfig":{
          "B_0_0":{
            "amiStyle":{
              "pt":"LAYOUT_DEFAULT"
            },
            "autoMajorValue":true,
            "autoMaxValue":true,
            "autoMinValue":true,
            "autoMinorValue":true,
            "axisId":3,
            "fontStyle":"",
            "format":null,
            "formatType":5,
            "isGroupOrdered":true,
            "orientation":"T",
            "reverse":false,
            "title":"Timestamp"
          },
          "L_0_0":{
            "amiStyle":{
              "pt":"LAYOUT_DEFAULT"
            },
            "autoMajorValue":true,
            "autoMaxValue":true,
            "autoMinValue":true,
            "autoMinorValue":true,
            "axisId":2,
            "fontStyle":"",
            "format":null,
            "formatType":5,
            "isGroupOrdered":true,
            "orientation":"R",
            "reverse":true,
            "title":"Price"
          }
        },
        "axisLcnts":[
          1
        ],
        "axisRcnts":[
          0
        ],
        "axisTcnts":[
          0
        ],
        "colsCount":1,
        "dm":[
          {
            "dmadn":"datamodel",
            "dmtbid":[
              "FEED:trades"
            ]
          }
        ],
        "mdivs":[
          {
            "mdivs":[
              {
                "mdivs":[
                  {
                    "p":-1,
                    "w":1.0
                  }
                ],
                "p":70,
                "w":1.0
              },
              {
                "p":-1,
                "w":1.0
              }
            ],
            "p":-1,
            "w":1.0
          },
          {
            "mdivs":[
              {
                "mdivs":[
                  {
                    "p":-1,
                    "w":1.0
                  }
                ],
                "p":70,
                "w":1.0
              },
              {
                "mdivs":[
                  {
                    "p":-1,
                    "w":1.0
                  }
                ],
                "p":-1,
                "w":1.0
              }
            ],
            "p":70,
            "w":1.0
          }
        ],
        "plotConfig":{
          "0_0":{
            "bgColor":"#ffffff",
            "layers":[
              {
                "amiStyle":{
                  "pt":"LAYOUT_DEFAULT"
                },
                "dmTableName":"FEED:trades",
                "dmadn":"datamodel",
                "id":0,
                "layers":[
                  {
                    "editorType":"2dLine",
                    "id":4,
                    "lineColor":{
                      "type":"const",
                      "value":"\"#043805\""
                    },
                    "lineSize":"1",
                    "mBorderColor":{
                      "type":"const",
                      "value":"\"#043805\""
                    },
                    "mBorderSize":"1",
                    "mColor":{
                      "type":"const",
                      "value":"\"#191f35\""
                    },
                    "mHeight":"3",
                    "mShape":"\"circle\"",
                    "mWidth":"3",
                    "name":"symbol",
                    "seriesName":"Layer",
                    "tooltip":"symbol+\"<BR>\"+\"X: \"+formatNumber(timestamp, \"#.000\", \"\")+\"<BR>Y: \"+formatNumber(price, \"#.000\", \"\")",
                    "xPos":"timestamp",
                    "yPos":"price"
                  }
                ],
                "name":"Layer",
                "opac":100,
                "type":"Chart",
                "xAxisId":3,
                "yAxisId":2
              }
            ],
            "plotId":1,
            "selBoxBorderColor":"#404040ef",
            "selBoxFillColor":"#40404007",
            "selColor":"#bacbfb6e"
          }
        },
        "rowsCount":1,
        "titlePnl":{
          "title":"FEED:trades"
        },
        "upid":"datamodel2"
      }
    },
    {
      "portletBuilderId":"amirealtimetable",
      "portletConfig":{
        "amiCols":[
          {
            "fm":"symbol",
            "id":"symbol",
            "location":0,
            "tl":"Symbol",
            "tp":"text",
            "width":100
          },
          {
            "fm":"price",
            "id":"price",
            "location":1,
            "tl":"Price",
            "tp":"price",
            "width":80
          },
          {
            "fm":"quantity",
            "id":"quantity",
            "location":2,
            "pc":0,
            "tl":"Quantity",
            "tp":"numeric",
            "width":80
          },
          {
            "fm":"buyAccount",
            "id":"buyAccount",
            "location":3,
            "tl":"buy Account",
            "tp":"text",
            "width":100
          },
          {
            "fm":"sellAccount",
            "id":"sellAccount",
            "location":4,
            "tl":"sell Account",
            "tp":"text",
            "width":100
          },
          {
            "fm":"timestamp",
            "id":"timestamp",
            "location":5,
            "tl":"Timestamp",
            "tp":"numeric",
            "width":80
          },
          {
            "id":"D",
            "width":100
          },
          {
            "id":"A",
            "width":100
          },
          {
            "id":"!data",
            "width":250
          },
          {
            "id":"M",
            "width":120
          },
          {
            "id":"C",
            "width":120
          },
          {
            "id":"V",
            "width":80
          },
          {
            "id":"W",
            "width":120
          },
          {
            "id":"T",
            "width":100
          },
          {
            "id":"P",
            "width":100
          },
          {
            "id":"E",
            "width":120
          },
          {
            "id":"I",
            "width":100
          }
        ],
        "amiPanelId":"trades",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "amiTitle":"trades",
        "curtimeUpdateFrequency":1000,
        "editDblClk":true,
        "editMenuTitle":"Edit Row(s)",
        "editMode":0,
        "filters":{
        },
        "hah":"true",
        "pinCnt":0,
        "rollupEnabled":false,
        "rtDownstreamMode":"SELECTED_OR_ALL",
        "rtSources":[
          "FEED:trades"
        ],
        "scrollToBottomOnAppend":true,
        "showCommandMenu":true,
        "titlePnl":{
          "title":"trades"
        },
        "upid":"Table1",
        "varTypes":{
          "buyAccount":"String",
          "price":"Double",
          "quantity":"Integer",
          "sellAccount":"String",
          "symbol":"String",
          "timestamp":"Double"
        }
      }
    },
    {
      "portletBuilderId":"amichartgrid",
      "portletConfig":{
        "amiPanelId":"trades_velo",
        "amiStyle":{
          "pt":"LAYOUT_DEFAULT"
        },
        "amiTitle":"orderLadder",
        "axisBcnts":[
          1
        ],
        "axisConfig":{
          "B_0_0":{
            "amiStyle":{
              "pt":"LAYOUT_DEFAULT"
            },
            "autoMajorValue":true,
            "autoMaxValue":true,
            "autoMinValue":true,
            "autoMinorValue":true,
            "axisId":3,
            "fontStyle":"",
            "format":null,
            "formatType":5,
            "isGroupOrdered":true,
            "orientation":"T",
            "reverse":false,
            "title":""
          },
          "L_0_0":{
            "amiStyle":{
              "pt":"LAYOUT_DEFAULT"
            },
            "autoMajorValue":true,
            "autoMaxValue":true,
            "autoMinValue":true,
            "autoMinorValue":true,
            "axisId":2,
            "fontStyle":"",
            "format":null,
            "formatType":5,
            "isGroupOrdered":true,
            "orientation":"R",
            "reverse":true,
            "title":""
          }
        },
        "axisLcnts":[
          1
        ],
        "axisRcnts":[
          0
        ],
        "axisTcnts":[
          0
        ],
        "colsCount":1,
        "dm":[
          {
            "dmadn":"ordersLadder",
            "dmtbid":[
              "FEED:orderFeed"
            ]
          }
        ],
        "mdivs":[
          {
            "mdivs":[
              {
                "mdivs":[
                  {
                    "p":-1,
                    "w":1.0
                  }
                ],
                "p":70,
                "w":1.0
              },
              {
                "p":-1,
                "w":1.0
              }
            ],
            "p":-1,
            "w":1.0
          },
          {
            "mdivs":[
              {
                "mdivs":[
                  {
                    "p":-1,
                    "w":1.0
                  }
                ],
                "p":70,
                "w":1.0
              },
              {
                "mdivs":[
                  {
                    "p":-1,
                    "w":1.0
                  }
                ],
                "p":-1,
                "w":1.0
              }
            ],
            "p":70,
            "w":1.0
          }
        ],
        "plotConfig":{
          "0_0":{
            "bgColor":"#ffffff",
            "layers":[
              {
                "amiStyle":{
                  "pt":"LAYOUT_DEFAULT"
                },
                "dmTableName":"FEED:orderFeed",
                "dmadn":"ordersLadder",
                "id":0,
                "layers":[
                  {
                    "editorType":"2dBarV",
                    "id":4,
                    "mColor":{
                      "type":"const",
                      "value":"\"#1338BE\""
                    },
                    "mLeft":".1",
                    "mRight":".9",
                    "mShape":"\"square\"",
                    "name":"symbol",
                    "orderBy":"tradeVelocity(symbol)",
                    "seriesName":"Layer",
                    "vStackOn":"tradeVelocity(symbol)",
                    "xLbl":"symbol"
                  }
                ],
                "name":"Layer",
                "opac":100,
                "type":"Chart",
                "xAxisId":3,
                "yAxisId":2
              }
            ],
            "plotId":1,
            "selBoxBorderColor":"#404040ef",
            "selBoxFillColor":"#40404007",
            "selColor":"#bacbfb6e"
          }
        },
        "rowsCount":1,
        "titlePnl":{
          "title":"orderLadder"
        },
        "upid":"ordersLadder2"
      }
    },
    {
      "portletBuilderId":"amichartgrid",
      "portletConfig":{
        "amiPanelId":"trading_volume",
        "amiStyle":{
          "bgCl":"#d6ffe4",
          "fontFam":"Ubuntu",
          "fontSt":"normal",
          "pt":"NOVA_LIGHT_SPARSE",
          "titlePnlFontCl":"#000000",
          "titlePnlFontFm":"Ubuntu",
          "titlePnlFontSz":31.0
        },
        "amiTitle":"Trade Volume",
        "axisBcnts":[
          1
        ],
        "axisConfig":{
          "B_0_0":{
            "amiStyle":{
              "pt":"LAYOUT_DEFAULT"
            },
            "autoMajorValue":true,
            "autoMaxValue":true,
            "autoMinValue":true,
            "autoMinorValue":true,
            "axisId":3,
            "fontStyle":"",
            "format":null,
            "formatType":5,
            "isGroupOrdered":true,
            "orientation":"T",
            "reverse":false,
            "title":""
          },
          "L_0_0":{
            "amiStyle":{
              "pt":"LAYOUT_DEFAULT"
            },
            "autoMajorValue":true,
            "autoMaxValue":true,
            "autoMinValue":true,
            "autoMinorValue":true,
            "axisId":2,
            "fontStyle":"",
            "format":null,
            "formatType":5,
            "isGroupOrdered":true,
            "orientation":"R",
            "reverse":true,
            "title":""
          }
        },
        "axisLcnts":[
          1
        ],
        "axisRcnts":[
          0
        ],
        "axisTcnts":[
          0
        ],
        "colsCount":1,
        "dm":[
          {
            "dmadn":"fills",
            "dmtbid":[
              "fills"
            ]
          }
        ],
        "mdivs":[
          {
            "mdivs":[
              {
                "mdivs":[
                  {
                    "p":-1,
                    "w":1.0
                  }
                ],
                "p":70,
                "w":1.0
              },
              {
                "p":-1,
                "w":1.0
              }
            ],
            "p":-1,
            "w":1.0
          },
          {
            "mdivs":[
              {
                "mdivs":[
                  {
                    "p":-1,
                    "w":1.0
                  }
                ],
                "p":70,
                "w":1.0
              },
              {
                "mdivs":[
                  {
                    "p":-1,
                    "w":1.0
                  }
                ],
                "p":-1,
                "w":1.0
              }
            ],
            "p":70,
            "w":1.0
          }
        ],
        "plotConfig":{
          "0_0":{
            "bgColor":"#d6ffe4",
            "layers":[
              {
                "amiStyle":{
                  "pt":"LAYOUT_DEFAULT"
                },
                "dmTableName":"fills",
                "dmadn":"fills",
                "id":0,
                "layers":[
                  {
                    "editorType":"2dBarV",
                    "id":4,
                    "mColor":{
                      "type":"const",
                      "value":"\"#1338BE\""
                    },
                    "mLeft":".1",
                    "mRight":".9",
                    "mShape":"\"square\"",
                    "name":"symbol",
                    "orderBy":"sum(Qty)",
                    "seriesName":"Layer",
                    "tooltip":"\"X: \"+symbol+\"<BR>Y: \"+formatNumber(sum(Qty), \"#.000\", \"\")",
                    "vStackOn":"sum(Qty)",
                    "xLbl":"symbol"
                  }
                ],
                "name":"Layer",
                "opac":100,
                "type":"Chart",
                "xAxisId":3,
                "yAxisId":2
              }
            ],
            "plotId":1,
            "selBoxBorderColor":"#7f7f7f7f",
            "selBoxFillColor":"#40404007",
            "selColor":"#bacbfb6e"
          }
        },
        "rowsCount":1,
        "titlePnl":{
          "title":"Trade Volume"
        },
        "upid":"fills"
      }
    }
  ]
}